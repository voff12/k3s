<!DOCTYPE html>

<html class="light" lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>存储与卷管理 - 灵犀平台</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <link
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap"
        rel="stylesheet" />
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#2b9dee",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101a22",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: { "DEFAULT": "0.25rem", "lg": "0.5rem", "xl": "0.75rem", "full": "9999px" },
                },
            },
        }
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .material-symbols-outlined {
            font-size: 24px;
            vertical-align: middle;
        }
    </style>
</head>

<body
    class="bg-background-light dark:bg-background-dark text-[#111518] dark:text-gray-100 font-display transition-colors duration-200">
    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside
            class="w-64 bg-white dark:bg-[#1a262f] border-r border-gray-200 dark:border-gray-800 flex flex-col shrink-0">
            <div class="p-6 flex items-center gap-3">
                <div
                    class="size-10 bg-gradient-to-br from-purple-500 to-blue-500 rounded-lg flex items-center justify-center text-white shadow-lg">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                        <path
                            d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5zm0 2.18l8 4v8.82c0 4.54-3.07 8.83-7.09 9.95C8.07 19.83 5 15.54 5 11V8.18l7-3.5z" />
                        <path
                            d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" />
                    </svg>
                </div>
                <div>
                    <h1
                        class="text-base font-bold leading-tight bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent">
                        灵犀平台</h1>
                    <p class="text-xs text-gray-500 dark:text-gray-400">智能云管理平台</p>
                </div>
            </div>
            <nav class="flex-1 px-3 space-y-1">
                <a class="flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"
                    href="/dashboard">
                    <span class="material-symbols-outlined">dashboard</span>
                    <span class="text-sm font-medium">集群概览</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"
                    href="/">
                    <span class="material-symbols-outlined">layers</span>
                    <span class="text-sm font-medium">Pod 列表</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2 bg-primary/10 text-primary rounded-lg" href="/store">
                    <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1">database</span>
                    <span class="text-sm font-medium">存储管理</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"
                    href="/memory">
                    <span class="material-symbols-outlined" style="font-variation-settings: 'FILL' 1">memory</span>
                    <span class="text-sm font-medium">内存管理</span>
                </a>
                <a class="flex items-center gap-3 px-3 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg"
                    href="/aitools">
                    <span class="material-symbols-outlined">smart_toy</span>
                    <span class="text-sm font-medium">AI 工具箱</span>
                </a>
            </nav>
            <div class="p-4 border-t border-gray-200 dark:border-gray-800">
                <div class="flex items-center gap-3 px-2">
                    <div class="size-8 rounded-full bg-gray-200 dark:bg-gray-700 bg-cover bg-center"
                        data-alt="User Avatar Profile Image"
                        style="background-image: url('https://lh3.googleusercontent.com/aida-public/AB6AXuDMSTbQOgrz7t58cTCaIoL8OGYHVwDYX--qsmt2kWblpkzIeEVIk_YDB1h-TKVpWaEf3UBoII1tiMTX5lGYxhL7E-HEoqXFgS0-1DTGccWPbQSGaAOwQOqpObAoRvoqpH5DKWSJooHdnu6Xqjp7GuyPvDjxCrZi8zHHZDKQuOMBkwcqUpUKz88HxEC0vqeQAruaWkrQSxwLDKq5K1Ryz45mpPPrZUTwOX_GWMR_LywB6FAlu14_S3jE1Ronjzfz4mF1OlTE9S9m5u4S')">
                    </div>
                    <div class="flex-1 min-w-0">
                        <p class="text-xs font-medium truncate">管理员</p>
                        <p class="text-[10px] text-gray-500 dark:text-gray-400 truncate">admin@hospital.local</p>
                    </div>
                </div>
            </div>
        </aside>
        <!-- Main Content -->
        <main class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <header
                class="h-16 bg-white dark:bg-[#1a262f] border-b border-gray-200 dark:border-gray-800 flex items-center justify-between px-8 shrink-0">
                <div class="flex items-center gap-4">
                    <span class="material-symbols-outlined text-primary">storage</span>
                    <h2 class="text-lg font-bold">存储与卷管理</h2>
                </div>
                <div class="flex items-center gap-4">
                    <div class="relative">
                        <span
                            class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm">search</span>
                        <input
                            class="pl-9 pr-4 py-1.5 bg-background-light dark:bg-background-dark border-none rounded-lg text-sm focus:ring-2 focus:ring-primary w-64"
                            placeholder="搜索存储卷..." type="text" />
                    </div>
                    <button
                        class="flex items-center gap-2 bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-lg text-sm font-bold transition-all">
                        <span class="material-symbols-outlined text-[20px]">add</span>
                        创建存储卷
                    </button>
                    <div class="flex items-center gap-2">
                        <button
                            class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
                            <span class="material-symbols-outlined">notifications</span>
                        </button>
                        <button
                            class="p-2 text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors">
                            <span class="material-symbols-outlined">settings</span>
                        </button>
                    </div>
                </div>
            </header>
            <!-- Scrollable Content -->
            <div class="flex-1 overflow-y-auto p-8 space-y-8">
                <!-- Section 1: 存储概览 -->
                <section>
                    <h3 class="text-base font-bold mb-4 flex items-center gap-2">
                        <span class="w-1.5 h-4 bg-primary rounded-full"></span>
                        存储概览
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div
                            class="bg-white dark:bg-[#1a262f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 flex justify-between items-start">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400 font-medium">总容量 (Total Capacity)</p>
                                <h4 class="text-3xl font-bold mt-2" th:text="${overview.totalCapacity}">2.5 <span
                                        class="text-lg font-normal">TB</span></h4>
                                <p class="text-xs text-green-600 mt-2 flex items-center gap-1 font-medium">
                                    <span class="material-symbols-outlined text-xs">trending_up</span> 正常运行中
                                </p>
                            </div>
                            <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                <span class="material-symbols-outlined text-primary">analytics</span>
                            </div>
                        </div>
                        <div
                            class="bg-white dark:bg-[#1a262f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 flex justify-between items-start">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400 font-medium">已用空间 (Used Space)</p>
                                <h4 class="text-3xl font-bold mt-2" th:text="${overview.usedSpace}">1.2 <span
                                        class="text-lg font-normal">TB</span></h4>
                                <div class="w-48 h-2 bg-gray-100 dark:bg-gray-800 rounded-full mt-4 overflow-hidden">
                                    <div class="bg-primary h-full" th:style="'width: ' + ${overview.usagePercentage}">
                                    </div>
                                </div>
                                <p class="text-xs text-gray-400 mt-2" th:text="'已使用 ' + ${overview.usagePercentage}">已使用
                                    48.0%</p>
                            </div>
                            <div class="p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                <span class="material-symbols-outlined text-primary">pie_chart</span>
                            </div>
                        </div>
                        <div
                            class="bg-white dark:bg-[#1a262f] p-6 rounded-xl border border-gray-200 dark:border-gray-800 flex justify-between items-start">
                            <div>
                                <p class="text-sm text-gray-500 dark:text-gray-400 font-medium">健康磁盘数 (Healthy Disks)
                                </p>
                                <h4 class="text-3xl font-bold mt-2"><span th:text="${overview.healthyDisks}">12</span>
                                    <span class="text-lg font-normal" th:text="'/ ' + ${overview.totalDisks}">/
                                        12</span>
                                </h4>
                                <p class="text-xs text-green-600 mt-2 flex items-center gap-1 font-medium">
                                    <span class="material-symbols-outlined text-xs">check_circle</span> 100% 健康度
                                </p>
                            </div>
                            <div class="p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                                <span class="material-symbols-outlined text-green-600">hard_drive</span>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Section 2: 存储类与卷管理 -->
                <section>
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-base font-bold flex items-center gap-2">
                            <span class="w-1.5 h-4 bg-primary rounded-full"></span>
                            存储类与卷管理
                        </h3>
                        <div class="flex gap-1 bg-gray-200/50 dark:bg-gray-800 p-1 rounded-lg">
                            <button id="tabPV" onclick="switchTab('pv')"
                                class="px-4 py-1.5 bg-white dark:bg-gray-700 text-primary text-xs font-bold rounded-md shadow-sm">存储卷
                                (PV)</button>
                            <button id="tabPVC" onclick="switchTab('pvc')"
                                class="px-4 py-1.5 text-gray-500 dark:text-gray-400 text-xs font-bold rounded-md hover:bg-gray-100/50 dark:hover:bg-gray-800 transition-colors">卷声明
                                (PVC)</button>
                        </div>
                    </div>

                    <!-- PV Table -->
                    <div id="pvTable"
                        class="bg-white dark:bg-[#1a262f] rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden">
                        <table class="w-full text-left border-collapse">
                            <thead
                                class="bg-background-light dark:bg-background-dark/50 border-b border-gray-200 dark:border-gray-800">
                                <tr>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        卷名称</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        状态</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        容量</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        访问模式</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        挂载 Pod</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider text-right">
                                        操作</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
                                <tr th:each="vol : ${volumes}"
                                    class="hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <span
                                                class="material-symbols-outlined text-gray-400 text-lg">description</span>
                                            <span class="text-sm font-medium" th:text="${vol.name}">pv-name</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium"
                                            th:classappend="${vol.statusColor}" th:text="${vol.status}">
                                            Bound
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-sm font-medium" th:text="${vol.capacity}">100Gi</td>
                                    <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400"
                                        th:text="${vol.accessMode}">RWO</td>
                                    <td class="px-6 py-4">
                                        <span th:if="${vol.mountedPod != '未挂载'}"
                                            class="px-2 py-1 bg-primary/10 text-primary text-[10px] font-bold rounded flex items-center gap-1 w-fit">
                                            <span class="material-symbols-outlined text-[12px]">podium</span> <span
                                                th:text="${vol.mountedPod}">pod-name</span>
                                        </span>
                                        <span th:if="${vol.mountedPod == '未挂载'}"
                                            class="text-sm text-gray-400 italic">未挂载</span>
                                    </td>
                                    <td class="px-6 py-4 text-right">
                                        <button class="text-gray-400 hover:text-primary transition-colors">
                                            <span class="material-symbols-outlined text-xl">more_vert</span>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- PVC Table -->
                    <div id="pvcTable" style="display:none"
                        class="bg-white dark:bg-[#1a262f] rounded-xl border border-gray-200 dark:border-gray-800 overflow-hidden">
                        <table class="w-full text-left border-collapse">
                            <thead
                                class="bg-background-light dark:bg-background-dark/50 border-b border-gray-200 dark:border-gray-800">
                                <tr>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        声明名称</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        命名空间</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        状态</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        容量</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        访问模式</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        存储类</th>
                                    <th
                                        class="px-6 py-4 text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider">
                                        绑定 PV</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100 dark:divide-gray-800">
                                <tr th:each="pvc : ${pvcs}"
                                    class="hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="flex items-center gap-3">
                                            <span
                                                class="material-symbols-outlined text-gray-400 text-lg">assignment</span>
                                            <span class="text-sm font-medium" th:text="${pvc.name}">pvc-name</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span
                                            class="px-2 py-0.5 bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 text-xs rounded"
                                            th:text="${pvc.namespace}">default</span>
                                    </td>
                                    <td class="px-6 py-4">
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium"
                                            th:classappend="${pvc.statusColor}" th:text="${pvc.status}">
                                            Bound
                                        </span>
                                    </td>
                                    <td class="px-6 py-4 text-sm font-medium" th:text="${pvc.capacity}">2Gi</td>
                                    <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400"
                                        th:text="${pvc.accessMode}">RWO</td>
                                    <td class="px-6 py-4 text-sm text-gray-600 dark:text-gray-400"
                                        th:text="${pvc.storageClass}">local-path</td>
                                    <td class="px-6 py-4">
                                        <span th:if="${pvc.volumeName != '未绑定'}"
                                            class="px-2 py-1 bg-primary/10 text-primary text-[10px] font-bold rounded flex items-center gap-1 w-fit">
                                            <span class="material-symbols-outlined text-[12px]">hard_drive</span>
                                            <span th:text="${pvc.volumeName}">pv-name</span>
                                        </span>
                                        <span th:if="${pvc.volumeName == '未绑定'}"
                                            class="text-sm text-gray-400 italic">未绑定</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>
                <!-- Section 3: 物理磁盘监控 -->
                <section>
                    <h3 class="text-base font-bold mb-4 flex items-center justify-between">
                        <span class="flex items-center gap-2">
                            <span class="w-1.5 h-4 bg-primary rounded-full"></span>
                            物理磁盘监控
                        </span>
                        <span class="text-xs font-normal text-gray-500 flex items-center gap-1">
                            <span class="size-2 bg-green-500 rounded-full"></span> 资源状态良好
                        </span>
                    </h3>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
                        <!-- Node Item -->
                        <div th:each="node : ${nodes}"
                            class="bg-white dark:bg-[#1a262f] p-5 rounded-xl border border-gray-200 dark:border-gray-800">
                            <div class="flex items-center justify-between mb-4">
                                <div class="flex items-center gap-3">
                                    <div class="p-2 bg-primary/10 text-primary rounded-lg">
                                        <span class="material-symbols-outlined">storage</span>
                                    </div>
                                    <div>
                                        <p class="text-sm font-bold" th:text="${node.name}">Node-01</p>
                                        <p class="text-[10px] text-gray-500"
                                            th:text="'Local Path Provisioner: ' + ${node.path}">Local Path Provisioner:
                                            ...</p>
                                    </div>
                                </div>
                                <span class="text-xs font-bold text-primary" th:text="${node.status}">正常</span>
                            </div>
                            <div class="space-y-3">
                                <div class="flex items-center justify-between text-xs">
                                    <span class="text-gray-500" th:text="'挂载点: ' + ${node.mountPoint}">挂载点: ...</span>
                                    <span class="font-medium" th:text="${node.usage}">420GB / 800GB</span>
                                </div>
                                <div class="w-full h-1.5 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden">
                                    <div class="bg-primary h-full" th:style="'width: ' + ${node.usagePercentage} + '%'">
                                    </div>
                                </div>
                                <div class="flex justify-between items-center text-[10px]">
                                    <span class="text-gray-400" th:text="'文件系统: ' + ${node.filesystem}">文件系统:
                                        ext4</span>
                                    <span class="text-gray-400">读取: - | 写入: -</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script>
        function switchTab(tab) {
            const pvTable = document.getElementById('pvTable');
            const pvcTable = document.getElementById('pvcTable');
            const tabPV = document.getElementById('tabPV');
            const tabPVC = document.getElementById('tabPVC');
            const activeClass = 'px-4 py-1.5 bg-white dark:bg-gray-700 text-primary text-xs font-bold rounded-md shadow-sm';
            const inactiveClass = 'px-4 py-1.5 text-gray-500 dark:text-gray-400 text-xs font-bold rounded-md hover:bg-gray-100/50 dark:hover:bg-gray-800 transition-colors';

            if (tab === 'pv') {
                pvTable.style.display = '';
                pvcTable.style.display = 'none';
                tabPV.className = activeClass;
                tabPVC.className = inactiveClass;
            } else {
                pvTable.style.display = 'none';
                pvcTable.style.display = '';
                tabPV.className = inactiveClass;
                tabPVC.className = activeClass;
            }
        }
    </script>
</body>

</html>